# Example.com — 基本操作测试计划

## 概要
- 被测页面：`https://example.com/`
- 页面类型：静态示例页面，主要包含标题、说明文本和一个指向 IANA 的“Learn more”链接。
- 目标：验证页面基础可访问性、导航行为和关键元素的可见性。假定每个测试以干净的浏览器上下文开始。

## 假设与起始状态
1. 浏览器为干净/无缓存状态（新标签）。
2. 网络可访问 `https://example.com/` 且不会被本地防火墙/代理阻挡。
3. 没有用户登录或特定 cookie 影响页面（页面本身无登录）。
4. Playwright 环境已安装（`npx playwright test` 可运行）。

---

## 场景 1：页面加载与标题验证（Happy Path）

**目标**：确认页面可加载并显示正确标题。

**前置条件**：新浏览器上下文；空白会话。

**步骤**：
1. 打开浏览器并导航到 `https://example.com/`。

**预期结果**：
- 页面成功加载（HTTP 200-ish）；
- 浏览器标题为 `Example Domain`；
- 页面主体中的主标题（`<h1>`）显示文本 `Example Domain`。

**成功标准**：标题与 `<h1>` 文本匹配预期。

**失败条件**：页面无法加载（超时/网络错误）、标题不匹配或重要 DOM 元素缺失。

---

## 场景 2：链接存在性与导航（Happy Path）

**目标**：验证页面包含“Learn more”链接且点击后导航到 IANA 站点。

**前置条件**：场景 1 成功或同等起始状态。

**步骤**：
1. 在 `https://example.com/` 页面，检查是否存在文本为 `Learn more` 的锚点。
2. 点击该锚点。
3. 等待导航完成并检查目标 URL。

**预期结果**：
- 页面包含 `Learn more` 链接，链接 href 指向 `https://iana.org/domains/example`；
- 点击后，浏览器跳转到以 `iana.org` 为主机的 URL（可用正则 `/iana\.org/` 验证）。

**成功标准**：导航到正确的外部 URL，且页面响应正常。

**失败条件**：链接缺失、href 不正确、点击不起作用或导航到错误的目标。

---

## 场景 3：元素可见性与无障碍（Accessibility）检查

**目标**：验证关键元素对于普通用户与辅助技术均可访问。

**前置条件**：新会话访问页面。

**步骤**：
1. 检查 `<h1>` 是否可见并具有语义层级。
2. 检查主描述段落是否存在并可读。
3. 检查 `Learn more` 链接是否可通过键盘聚焦（Tab）访问。
4. 使用可用的无障碍检查工具（如 Playwright 的 accessibility snapshot 或 axe）扫描页面。

**预期结果**：
- `<h1>`、段落和链接可见且语义正确；
- 链接可通过键盘聚焦；
- 无重大无障碍阻断（如缺失文本替代、无法聚焦的交互元素等）。

**成功标准**：无关键可访问性失败。

**失败条件**：键盘无法访问链接、语义标记缺失或明显的可访问性违规。

---

## 场景 4：外部链接在新标签/当前标签的行为（边界情况）

**目标**：检查点击外部链接是否在当前标签或新标签打开（团队根据期望定义）。

**前置条件**：页面加载成功。

**步骤**：
1. 检查 `Learn more` 链接是否有 `target` 属性（如 `_blank`）。
2. 如果希望在新标签打开：点击并确认新页面上下文是否被打开（Playwright 监听 `page.on('popup')`）。
3. 如果希望在当前标签打开：点击并确认当前上下文导航到目标站点。

**预期结果**：行为与产品/团队期望一致（需明确期望）。

**成功标准**：链接打开行为与规范匹配。

**失败条件**：行为与预期不符（例如团队期望新标签但在当前标签打开）。

---

## 场景 5：网络异常/超时行为（负向测试）

**目标**：验证页面在部分资源加载失败或网络慢时的可感知表现。

**前置条件**：使用代理/Playwright 网络拦截模拟慢网或某些资源 404/500。

**步骤**：
1. 模拟主 HTML 正常，但某些资源（如图片或脚本）返回 404 或延迟响应。
2. 观察页面是否仍然可读并允许用户操作链接。
3. 在极端慢速情况下（例如大于 10s 延迟）验证用户是否得到合理超时或加载指示。

**预期结果**：
- 页面核心内容仍可读并可访问链接；
- 失败的资源不会阻塞或破坏主要交互路径。

**成功标准**：主要功能（阅读文本、点击链接）保持可用。

**失败条件**：资源错误导致页面脚本失败、链接不可点或页面完全空白。

---

## 可执行 Playwright 操作建议
- 使用 Playwright 的 `page.goto()` 检查页面加载和标题。示例断言：`await expect(page).toHaveTitle('Example Domain')`。
- 使用 `page.locator('a', { hasText: 'Learn more' })` 定位并 `click()`，然后 `await expect(page).toHaveURL(/iana\.org/)` 验证导航。
- 使用 `page.accessibility.snapshot()` 或集成 `axe-core` 做无障碍扫描。
- 模拟网络条件：在 Playwright 中使用 `page.route()` 或 `context.setDefaultNavigationTimeout()` 进行超时/拦截。

## 附录 — 自动化/手动测试要点
- 自动化：适用于场景 1 与 2（稳定），场景 3 可以用自动化无障碍工具覆盖大部分检查。
- 手动：建议对 UX 视觉呈现和外部站点内容做一次人工确认（例如外部 IANA 页面是否符合预期）。

---

文件路径：`/Users/bytedance/Desktop/Playwright-demo/tests/example-com-test-plan.md`

如需我将上述场景转换为 Playwright 测试脚本（每个场景一个 `test()`），我可以继续生成并运行它们。
